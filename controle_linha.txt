1 // PROGRAMA DE CONTROLE DE LINHA DE PRODU Ç Ã O - VERS Ã O 1.1
2 // Data : 12/2025
3 // Autor : Antonio Marcos de Godoi
4 // Descri ç ã o : Controle b á sico de esteira transportadora com sensor de presen ç a
5 // Altera ç õ es : Adicionado sensor de temperatura , sensor do meio e novos avisos
6
7 // DEFINI Ç Ã O DE VARI Á VEIS
8 VAR
9 // Entradas digitais
10 sensor_inicio : BOOL ; // Sensor de presen ç a no in í cio da esteira
11 sensor_fim : BOOL ; // Sensor de presen ç a no fim da esteira
12 botao_start : BOOL ; // Bot ã o de in í cio de opera ç ã o
13 botao_stop : BOOL ; // Bot ão de parada
14 parada_emergencia : BOOL ; // Bot ã o de parada de emerg ê ncia
15
16 // Novas entradas adicionadas na manuten ç ã o
17 sensor_temperatura : REAL ; // Sensor de temperatura do motor
18 sensor_meio : BOOL ; // Sensor no meio da esteira
19
20 // Sa í das digitais
21 motor_esteira : BOOL ; // Motor da esteira transportadora
22 luz_verde : BOOL ; // Luz indicadora de opera ç ã o normal
23 luz_vermelha : BOOL ; // Luz indicadora de parada
24
25 // Novas sa í das adicionadas na manuten ç ã o
26 luz_amarela : BOOL ; // Luz de alerta
27 alarme : BOOL ; // Alarme sonoro
28
29 // Vari á veis internas
30 contador_pecas : INT ; // Contador de pe ç as processadas
31 sistema_ligado : BOOL ; // Estado do sistema
32 sensor_fim_anterior : BOOL := FALSE ; // Inicializado corretamente
33 botao_start_anterior : BOOL := FALSE ; // Inicializado corretamente
34
35 // Novas vari á veis adicionadas na manuten ç ã o
36 sensor_meio_anterior : BOOL ; // Estado anterior do sensor do meio
37
38
39 END_VAR

8

40
41 // L Ó GICA PRINCIPAL
42
43 // Verifica ç ã o de parada de emerg ê ncia ( l ó gica invertida - NC )
44 IF NOT parada_emergencia THEN
45 sistema_ligado := FALSE ;
46 luz_vermelha := TRUE ;
47 luz_verde := FALSE ;
48 luz_amarela := FALSE ;
49 motor_esteira := FALSE ;
50 alarme := TRUE ;
51 ELSE
52 alarme := FALSE ; // Alarme desliga ao liberar a emerg ê ncia
53 END_IF ;
54
55 // Monitoramento de temperatura ( adicionado na manuten ç ã o )
56 IF sensor_temperatura > 80.0 THEN
57 luz_amarela := TRUE ;
58
59 // Se temperatura cr í tica , ativar alarme e parar esteira
60 IF sensor_temperatura > 95.0 THEN
61 alarme := TRUE ;
62 sistema_ligado := FALSE ;
63 motor_esteira := FALSE ;
64 luz_verde := FALSE ;
65 luz_vermelha := TRUE ;
66 END_IF ;
67 ELSE
68 luz_amarela := FALSE ;
69 END_IF ;
70
71 // L ó gica de partida e parada
72 IF botao_start AND NOT botao_start_anterior THEN
73 sistema_ligado := TRUE ;
74 END_IF ;
75
76 IF botao_stop THEN
77 sistema_ligado := FALSE ;
78 END_IF ;
79
80 // Controle da esteira e sinaliza ç õ es
81 IF sistema_ligado THEN

9

82 motor_esteira := TRUE ;
83 luz_verde := TRUE ;
84 luz_vermelha := FALSE ;
85 ELSE
86 motor_esteira := FALSE ;
87 luz_verde := FALSE ;
88 luz_vermelha := TRUE ;
89 END_IF ;
90
91 // Contagem de pe ç as ( borda de subida )
92 IF sensor_fim AND NOT sensor_fim_anterior THEN
93 contador_pecas := contador_pecas + 1;
94 END_IF ;
95
96 // L ó gica para o sensor do meio ( adicionado na manuten ç ã o )
97 IF sensor_meio AND NOT sensor_meio_anterior THEN
98 // Registra passagem pelo meio da esteira
99 // Futuras expans õ es poderiam usar este ponto para desvios
100 END_IF ;
101
102 // Atualiza estados anteriores
103 sensor_fim_anterior := sensor_fim ;
104 sensor_meio_anterior := sensor_meio ;
105 botao_start_anterior := botao_start ;